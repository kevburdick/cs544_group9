/* * This class defines the Move message * client → server and server → client to indicate client’s cursor position * @author Kevin Burdick  */ package message;import java.util.ArrayList;import java.nio.ByteBuffer;import java.nio.ByteOrder;public class Move extends Message{   /**    *  Constructor    */   public Move(short pClientID, long pCursorPos)   {      super(Message.MOVE_TYPE,header_size);      optionsList = new ArrayList<String>();           clientID = pClientID;      cursorPos = pCursorPos;    }	/**    *  Constructor    */   public Move(byte[] pMsg)   {      //FIXME should throw exception		super(Message.REQLOCK_TYPE,header_size);      optionsList = new ArrayList<String>();          type = (short)((pMsg[0] & 0xff<<8)|(pMsg[1] & 0xff));        length = (short)((pMsg[2] & 0xff<<8)|(pMsg[3] & 0xff)); 		clientID = (short)((pMsg[4]& 0xff<<8)|(pMsg[5] & 0xff));            cursorPos = (long)((pMsg[6]& 0xff<<8)|(pMsg[7]& 0xff<<8)|(pMsg[8]& 0xff<<8)|                  (pMsg[9]& 0xff<<8)|(pMsg[10]& 0xff<<8)|(pMsg[11]& 0xff<<8)|                  (pMsg[12]& 0xff<<8)|(pMsg[13]& 0xff<<0));             }       /**    *  Returns the byte array of the message     */	public byte[] getbyteArray() {      byte[] temp = new byte[header_size];      temp[0] = (byte)(type >> 8);      temp[1] = (byte)type;      temp[2] = (byte)(length >> 8);      temp[3] = (byte)length;      temp[4] = (byte)(clientID >> 8);      temp[5] = (byte)clientID;      byte[] temp2 = ByteBuffer.allocate(8).putLong(cursorPos).array();      for(int i=0;i<8;i++) {          temp[6+i] = temp2[i];        }      return temp;   }       public short getClientID() {       return clientID;   }   public long getCursorPos() {       return cursorPos;   }	public ArrayList<String> getOptions() {       return optionsList;   }   public void dumpMsg() {      System.out.println("message");      System.out.println("type = "+type);      System.out.println("length = "+length);      System.out.println("clientID = "+clientID);		System.out.println("cursorPos = "+cursorPos);      System.out.println("options size = "+optionsList.size());	}        //options list   private  ArrayList<String> optionsList;	//this is the size of the header, does not include options field   private static final short header_size= 14;    private short clientID;   private long cursorPos;}